# Chapter 20 - 모니터링, Slowlog, 지연 분석

- 상태: 초안 완료
- 목표 분량: 11쪽

## 학습 목표

- Redis 관측 지표의 우선순위를 이해한다.
- Slowlog를 사용해 느린 명령을 진단할 수 있다.
- 지연 상승 시 분석 순서를 체계화할 수 있다.

## 핵심 지표

- 명령 처리량(ops/sec)
- 메모리 사용량/eviction
- 연결 수
- CPU 사용량
- 복제 지연
- keyspace hit/miss

## Slowlog 기본

```bash
redis-cli -p 6380 SLOWLOG LEN
redis-cli -p 6380 SLOWLOG GET 10
```

Slowlog는 느린 명령 패턴을 찾는 데 유용합니다.

## 지연 분석 순서

1. 증상 확인: API p95 상승 구간 식별
2. Redis 지표 확인: CPU, 메모리, 연결, eviction
3. 느린 명령 확인: Slowlog
4. 키 문제 확인: BigKey, 핫키, 무거운 범위 조회
5. 재현 테스트와 개선안 검증

## 설계 포인트

- 알림 임계치(예: 메모리 80%, 히트율 급락) 설정
- 지표 대시보드와 런북 연결
- 성능 이슈는 재현 가능한 시나리오와 함께 기록

## 자주 하는 실수

1. 평균 응답시간만 보고 p95/p99를 무시
2. 모니터링은 있는데 경보 기준이 없음
3. Slowlog를 한 번만 보고 추세를 보지 않음

## 요약

- 성능 문제는 지표, 로그, 키 패턴을 함께 봐야 해결된다.
- Slowlog와 p95 중심 모니터링이 실무에서 특히 중요하다.

## 연습문제

### 기초

1. Slowlog 최근 10개를 조회해 해석해보세요.
2. 필수 모니터링 지표 5개를 선정해보세요.

### 응용

1. Redis 지연 급등 사고 런북 초안을 작성해보세요.
2. 경보 임계치 정책을 서비스 특성에 맞게 제시해보세요.

## 챕터 체크리스트

- [x] 초안 작성 완료
- [x] 예제 명령어 검증 완료
- [x] 초보자 기준 용어 설명 완료
- [x] 최종 교정 완료
