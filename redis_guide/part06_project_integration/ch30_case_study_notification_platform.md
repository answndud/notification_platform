# Chapter 30 - 사례 연구: Notification Platform

- 상태: 초안 완료
- 목표 분량: 8쪽

## 학습 목표

- 이 프로젝트 맥락에서 Redis 도입 포인트를 설명할 수 있다.
- 토큰/캐시/장애 대응 시나리오를 사례로 연결할 수 있다.
- 기술 선택 이유를 정량/정성으로 정리할 수 있다.

## 프로젝트 맥락

이 레포는 API/Worker 구조와 인프라 구성을 포함합니다.
Redis는 인프라 정의에 포함되어 있으며(`notification_platform/docker-compose.idea3.yml`),
성능/장애 문서에서 도입 경험이 정리되어 있습니다.

이 사례를 학습용으로 쓰는 이유는 단순합니다.
"Redis 도입 성공담"만이 아니라,
키 설계 미흡, TTL 누락, 포맷 불일치 같은 전형적 실패 패턴이 함께 기록되어 있기 때문입니다.
초보 학습자에게는 성공보다 실패 복기가 더 큰 학습 효과를 줍니다.

참고 문서:

- `performance-optimization/07-redis-adoption-story-script.md`
- `performance-optimization/19-redis-failure-and-recovery-runbook.md`

## 사례 요약

1. 문제
- 인증 경로에서 DB 의존이 높아 피크 시간 지연 증가

2. 접근
- 토큰 데이터 특성(짧은 수명, 단건 조회)에 맞춰 Redis 활용

3. 장애/실수
- 키 설계 미흡, TTL 누락, 포맷 불일치 같은 운영 이슈 발생

4. 개선
- 키 규칙 표준화
- 저장 시 TTL 강제
- 직렬화 포맷 통일
- 런북 기반 장애 대응

### 왜 이 개선이 효과적이었는가

- 키 규칙 표준화: 조회/삭제 경로를 O(1) 단건 접근으로 단순화
- TTL 강제: 만료 누락으로 생기는 보안/메모리 리스크 감소
- 포맷 통일: 경로별 파싱 예외 제거
- 런북 운영: 장애 시 판단 속도와 일관성 향상

즉, 성능 개선의 본질은 "도구 추가"가 아니라 "운영 규칙 정립"입니다.

## 설계 포인트

- Redis 도입은 "속도"보다 "도메인 적합성"이 우선
- 운영 표준(키/TTL/포맷/런북)이 없으면 성능 이점이 유지되지 않음
- 정량 지표와 회고 문서를 함께 관리해야 재발을 막을 수 있음

면접/포트폴리오 관점 정리:

- 문제를 계측으로 정의했는가
- 실패 원인을 구조적으로 좁혔는가
- 개선 후 재측정으로 효과를 증명했는가
- 운영 표준으로 재발을 막았는가

이 네 단계가 있으면 "기술 나열"이 아니라 "문제 해결 경험"이 됩니다.

## 자주 하는 실수

1. Redis 도입 자체를 목표로 삼음
2. 실패 경험을 문서화하지 않음
3. 성능 수치만 보고 운영 리스크를 누락

## 요약

- 이 사례의 핵심은 기술 도입보다 규칙 정립이다.
- Redis는 병목 제거 도구이면서, 운영 품질을 요구하는 시스템이다.

## 연습문제

### 기초

1. 이 사례의 문제-개선-성과를 10줄로 요약해보세요.
2. 키/TTL/직렬화 표준의 중요성을 설명해보세요.

### 응용

1. 본인 프로젝트에 적용할 Redis 도입 체크리스트를 작성해보세요.
2. Redis 실패 시 사용자 커뮤니케이션 문안을 작성해보세요.

## 챕터 체크리스트

- [x] 초안 작성 완료
- [ ] 예제 명령어 검증 완료
- [x] 초보자 기준 용어 설명 완료
- [x] 최종 교정 완료
