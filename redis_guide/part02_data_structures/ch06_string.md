# Chapter 06 - String 자료형

- 상태: 초안 완료
- 목표 분량: 11쪽

## 학습 목표

- String 자료형의 핵심 명령을 이해한다.
- 카운터, 토큰, 단일 값 캐시에 String을 적용할 수 있다.
- String 기반 구현의 한계를 판단할 수 있다.

## 핵심 개념

String은 Redis에서 가장 기본이 되는 자료형입니다.
텍스트뿐 아니라 숫자, 직렬화된 JSON도 저장할 수 있습니다.

String은 "단일 키 = 단일 값" 모델이라 학습과 운영이 쉽습니다.
그래서 Redis 입문 단계와 실무 초기 도입 모두에서 가장 먼저 사용됩니다.

다만 단순하다는 장점 때문에,
구조가 필요한 데이터를 무리하게 String 하나로 몰아넣는 실수가 자주 발생합니다.

자주 쓰는 명령:

- `SET`, `GET`, `MSET`, `MGET`
- `INCR`, `DECR`, `INCRBY`
- `SETNX` (조건부 설정)

보강 명령:

- `GETSET`: 이전 값 반환 + 새 값 저장
- `SET key value NX EX ...`: 조건과 TTL을 함께 설정
- `STRLEN`: 값 길이 확인

## 실습 예제

```bash
redis-cli -p 6380 SET cache:user:1 '{"name":"kim"}' EX 300
redis-cli -p 6380 GET cache:user:1
redis-cli -p 6380 INCR metric:login:count
redis-cli -p 6380 GET metric:login:count
```

관찰 포인트:
- JSON을 문자열로 저장 가능
- 카운터 증가가 원자적으로 동작

## 설계 포인트

- 단순 조회 데이터는 String이 가장 구현 비용이 낮다.
- 값이 커질수록 부분 갱신이 불편해진다.
- JSON 전체를 자주 갱신하면 네트워크/직렬화 비용이 커질 수 있다.

String이 특히 잘 맞는 상황:

- 토큰, 인증코드, 단일 상태값
- 요청 횟수 카운터
- 결과 스냅샷 캐시

String이 불리해지는 상황:

- 필드 단위 부분 갱신이 잦은 객체
- 일부 필드만 자주 조회하는 객체

이 경우 Hash 전환을 고려하면 성능/가독성 모두 개선되는 경우가 많습니다.

## 자주 하는 실수

1. 숫자 카운터를 문자열 파싱으로 직접 처리
2. 대형 JSON을 무제한 저장
3. 조건부 생성이 필요한데 `SETNX`를 쓰지 않음

## 요약

- String은 Redis의 기본이자 가장 자주 쓰는 자료형이다.
- 카운터, 토큰, 단일 키 캐시에 특히 적합하다.
- 큰 객체의 잦은 부분 갱신에는 Hash 등 대안을 검토해야 한다.

## 연습문제

### 기초

1. `SET`/`GET`/`INCR`를 이용해 방문자 카운터를 만들어보세요.
2. 캐시 키에 TTL 60초를 설정해보고 만료를 확인해보세요.

### 응용

1. 로그인 실패 횟수 제한을 String + TTL로 설계해보세요.
2. JSON String 저장 방식의 장단점을 정리해보세요.

## 챕터 체크리스트

- [x] 초안 작성 완료
- [x] 예제 명령어 검증 완료
- [x] 초보자 기준 용어 설명 완료
- [x] 최종 교정 완료
