# Chapter 22 - 성능 튜닝 플레이북

- 상태: 초안 완료
- 목표 분량: 9쪽

## 학습 목표
- 병목 분석 순서를 설명할 수 있다.
- Producer/Consumer 튜닝 포인트를 구분할 수 있다.
- 튜닝 전후 검증 기준을 수립할 수 있다.

## 핵심 개념

튜닝은 설정값 변경이 아니라 가설 검증 과정입니다.
"측정 -> 원인 분해 -> 소규모 변경 -> 재측정" 순서를 지켜야 합니다.

## 실습 예제

실습 목적: 한 번에 한 변수만 변경하는 성능 실험 루틴을 체득합니다.

```text
기준 수집: throughput, p95 latency, error rate, lag
변경 1개 적용 -> 10~30분 관측 -> 개선/악화 판단
```

예상 결과/관찰 포인트:
- 기준선(baseline) 없이 변경하면 개선 판단이 불가능하다는 점을 확인합니다.
- 단일 변수 변경 시 원인-결과 연결이 선명해집니다.
- p95 개선과 error rate 악화가 동시에 발생할 수 있음을 확인합니다.

## 실패 시 확인 항목

1. 동시 변경 여부
- 증상: 어떤 설정이 효과를 냈는지 구분 불가
- 확인: 실험 로그에서 변경 파라미터가 1개인지 점검

2. 관측 창 부족
- 증상: 일시 변동을 개선으로 오판
- 확인: 최소 10분 이상, 피크/비피크 모두 관측했는지 점검

3. 롤백 기준 부재
- 증상: 악화가 보여도 원복 지연
- 확인: 사전 롤백 조건(p95, error rate, lag)을 문서화했는지 점검

## 설계 포인트
- 한번에 한 변수만 바꾼다.
- 도메인별 SLO 기준을 먼저 정한다.
- 튜닝 결과를 지식베이스로 문서화한다.

운영 반영 체크리스트:
- 실험 전 baseline 수집(throughput, p95, error rate, lag)
- 변경/관측/판단/롤백을 한 문서에 기록
- 재현 가능한 튜닝 결과만 운영 표준에 반영

## 자주 하는 실수
1. 다수 설정 동시 변경
2. 베이스라인 없이 체감으로 판단
3. 악화 시 롤백 기준 부재

## 요약
- 튜닝은 실험 과학이다.
- 기준지표와 롤백정책이 필수다.

## 연습문제
### 기초
1. 튜닝 실험 템플릿을 작성해보세요.
2. 필수 성능 지표를 선정해보세요.

### 응용
1. 소비 지연 개선 실험 계획을 설계해보세요.
2. 튜닝 결과 보고서 포맷을 작성해보세요.

## 챕터 체크리스트
- [x] 초안 작성 완료
- [ ] 예제 명령어 검증 완료
- [x] 초보자 기준 용어 설명 완료
- [ ] 최종 교정 완료
