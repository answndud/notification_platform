# Chapter 23 - Consumer Lag 감소 전략

- 상태: 초안 완료
- 목표 분량: 9쪽

## 학습 목표
- lag 발생 원인을 분류할 수 있다.
- 소비 지연 완화 전략을 적용할 수 있다.
- 장기 lag 관리 체계를 설계할 수 있다.

## 핵심 개념

lag는 결과이지 원인이 아닙니다.
원인은 보통 생산 급증, 처리 지연, 외부 의존 장애, 리밸런스 과다로 나뉩니다.

## 실습 예제

```bash
docker exec -it idea3-kafka kafka-consumer-groups --bootstrap-server localhost:9092 --describe --group payment-workers
```

## 설계 포인트
- lag 증가 구간의 처리시간/실패율을 함께 본다.
- 느린 경로를 비동기 분리하거나 배치 처리로 전환한다.
- 대량 backlog 복구 절차(일시 스케일아웃/우선순위) 준비.

## 자주 하는 실수
1. 컨슈머 인스턴스 수만 늘리고 원인 미분석
2. 외부 API 병목을 Kafka 문제로 오판
3. backlog 해소 정책 미정의

## 요약
- lag는 시스템 병목 신호다.
- 원인 분해와 단계적 완화가 핵심이다.

## 연습문제
### 기초
1. lag 원인 4가지를 적어보세요.
2. lag 점검 체크리스트를 작성해보세요.

### 응용
1. backlog 해소 런북을 작성해보세요.
2. 지속적 lag 방지 구조를 설계해보세요.

## 챕터 체크리스트
- [x] 초안 작성 완료
- [x] 예제 명령어 검증 완료
- [x] 초보자 기준 용어 설명 완료
- [ ] 최종 교정 완료
